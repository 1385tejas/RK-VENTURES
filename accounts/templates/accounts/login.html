<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login - RK Ventures</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #f4f6f8; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; }
        .login-container {
            max-width: 400px;
            margin: 4rem auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 16px rgba(44,62,80,0.10);
            padding: 2.5rem 2rem 2rem 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h2 { color: #2d3e50; margin-bottom: 1.5rem; }
        form { width: 100%; display: flex; flex-direction: column; gap: 1rem; }
        label { font-weight: 500; color: #2d3e50; margin-bottom: 0.2rem; }
        input[type="text"], input[type="password"] {
            width: 100%; padding: 0.7rem 1rem; border-radius: 6px; border: 1px solid #ccc; font-size: 1rem; }
        button[type="submit"] {
            background: #2d3e50; color: #fff; border: none; border-radius: 6px; padding: 0.8rem 0; font-size: 1.1rem; font-weight: bold; margin-top: 0.5rem; cursor: pointer; transition: background 0.2s; }
        button[type="submit"]:hover { background: #1e2a38; }
        .switch-link { margin-top: 1.2rem; color: #888; font-size: 0.98rem; }
        .switch-link a { color: #2d3e50; text-decoration: none; font-weight: bold; }
        .switch-link a:hover { text-decoration: underline; }
        .messages { margin-bottom: 1rem; color: #c0392b; font-size: 1rem; }
        @media (max-width: 600px) { .login-container { max-width: 98vw; padding: 1.2rem; } }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Login to Your Account</h2>
        {% if messages %}
            <div class="messages">
                {% for message in messages %}{{ message }}<br>{% endfor %}
            </div>
        {% endif %}
        <form method="post" autocomplete="off">
            {% csrf_token %}
            <label for="identifier">Username / Phone / Email</label>
            <input type="text" name="identifier" id="identifier" placeholder="Enter username, phone, or email" required>
            <label for="password">Password</label>
            <input type="password" name="password" id="password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
        <div class="switch-link">Don't have an account? <a href="{% url 'register' %}">Register here</a>.</div>
    </div>
    <!-- Login Modal Popup for Guests -->
    {% if not user.is_authenticated %}
    <div id="loginModal" style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(44,62,80,0.85);align-items:center;justify-content:center;">
        <div style="background:#fff;padding:2rem 1.5rem 1.5rem 1.5rem;border-radius:12px;box-shadow:0 2px 16px rgba(44,62,80,0.18);max-width:350px;width:90vw;position:relative;display:flex;flex-direction:column;align-items:center;">
            <button id="closeLoginModal" style="position:absolute;top:10px;right:14px;background:none;border:none;font-size:1.7rem;color:#888;cursor:pointer;">&times;</button>
            <h2 style="color:#2d3e50;margin-bottom:1.2rem;">Login to Continue</h2>
            <form method="post" action="{% url 'login' %}" autocomplete="off" style="width:100%;display:flex;flex-direction:column;gap:1rem;">
                {% csrf_token %}
                <label for="modal-identifier">Username / Phone / Email</label>
                <input type="text" name="identifier" id="modal-identifier" placeholder="Enter username, phone, or email" required>
                <label for="modal-password">Password</label>
                <input type="password" name="password" id="modal-password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
            <div class="switch-link" style="margin-top:1rem;">Don't have an account? <a href="{% url 'register' %}">Register here</a>.</div>
        </div>
    </div>
    <script>
    (function() {
        if (!localStorage.getItem('loginModalDismissed')) {
            document.getElementById('loginModal').style.display = 'flex';
        }
        document.getElementById('closeLoginModal').onclick = function() {
            document.getElementById('loginModal').style.display = 'none';
            localStorage.setItem('loginModalDismissed', '1');
        };
        window.addEventListener('beforeunload', function() {
            if (!{{ user.is_authenticated|yesno:'true,false' }}) {
                localStorage.removeItem('loginModalDismissed');
            }
        });
        // Show modal again on refresh if not logged in
        window.addEventListener('load', function() {
            if (!{{ user.is_authenticated|yesno:'true,false' }}) {
                if (!localStorage.getItem('loginModalDismissed')) {
                    document.getElementById('loginModal').style.display = 'flex';
                }
            }
        });
    })();
    </script>
    {% endif %}
</body>
</html> 